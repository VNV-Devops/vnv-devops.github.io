<!-- {{/* Load UI refresh JS (tiny, progressive enhancement) */}}
{{- $js := resources.Get "js/ui-refresh.js" | minify | fingerprint -}}
<script defer src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}" crossorigin="anonymous"></script> -->

{{/* --- SEO hardening: canonical + JSON-LD --- */}}

<link rel="canonical" href="{{ .Permalink }}">

{{/* JSON-LD: Person + WebSite (lightweight, SEO-safe) */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Person",
      "@id": "{{ .Site.BaseURL }}#person",
      "name": "{{ .Site.Params.author }}",
      "url": "{{ .Site.BaseURL }}",
      "image": "{{ .Site.BaseURL }}",
      "jobTitle": "Digital Verification Engineer",
      "worksFor": {
        "@type": "Organization",
        "name": "Infineon Technologies"
      },
      "affiliation": [
        { "@type": "CollegeOrUniversity", "name": "TU Dresden" }
      ],
      "sameAs": [
        {{- $links := slice -}}
        {{- range .Site.Params.socialIcons -}}
          {{- $links = $links | append .url -}}
        {{- end -}}
        {{- range $i, $u := $links -}}
          {{- if $i }},{{ end -}}
          "{{ $u }}"
        {{- end -}}
      ]
    },
    {
      "@type": "WebSite",
      "@id": "{{ .Site.BaseURL }}#website",
      "url": "{{ .Site.BaseURL }}",
      "name": "{{ .Site.Title }}",
      "publisher": { "@id": "{{ .Site.BaseURL }}#person" }
    }
  ]
}
</script>

{{/* Hello preloader (home only) */}}
{{ if .IsHome }}
  {{ $helloCSS := resources.Get "css/extended/hello-preloader.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $helloCSS.RelPermalink }}" integrity="{{ $helloCSS.Data.Integrity }}">

  <script>
    // Inline early markup injection so it appears immediately (before main content paints).
    // This avoids layout flash and keeps SEO intact (overlay only).
    (function () {
      if (document.getElementById("hello-preloader")) return;
      var d = document.createElement("div");
      d.id = "hello-preloader";
      d.innerHTML =
        '<div class="hello-wrap">' +
          '<div class="hello-word"><span id="hello-word">Hello</span><span class="hello-cursor">|</span></div>' +
          '<div class="hello-sub">Welcome</div>' +
        '</div>';
      document.documentElement.appendChild(d);
    })();
  </script>

  {{ $helloJS := resources.Get "js/hello-preloader.js" | minify | fingerprint }}
  <script src="{{ $helloJS.RelPermalink }}" integrity="{{ $helloJS.Data.Integrity }}" defer></script>
{{ end }}

